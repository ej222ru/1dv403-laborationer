{"changed":true,"filter":false,"title":"memory.js","tooltip":"/5-pwd/script/memory/memory.js","value":"\"use strict\";\n\nfunction Memory(_rows, _columns, _game) {\n\n        Window.call(this);\n        var that = this;\n        this.rows = _rows;\n        this.columns = _columns;  \n        this.game = _game;\n        \n        this.pictures = [];\n        this.done = 0;\n        this.clicks =  0;\n        this.flipped =  0;\n        this.turnBackAtTimeoutNode1 = 0;\n        this.turnBackAtTimeoutNode2 = 0;\n    \n\n    \n    this.turnCard = function(e, index){\n        \n        \n        this.flippedCardsTimeout = function (){\n    //        if (this.flipped === 2){\n                that.turnBackAtTimeoutNode1.setAttribute(\"src\", \"script/memory/pics/0.png\"); \n                that.turnBackAtTimeoutNode2.setAttribute(\"src\", \"script/memory/pics/0.png\"); \n                that.flipped = 0;\n    //        }\n         \n        };        \n        var secondSameIndex = false;\n        if (this.flipped === 0){\n            this.turnBackAtTimeoutNode1 = e.target;\n        }\n        else if (this.flipped === 1){\n            if (this.turnBackAtTimeoutNode1 !== e.target){\n                this.turnBackAtTimeoutNode2 = e.target;\n            }\n            else{\n                secondSameIndex = true;\n            }\n        }\n\n        if (!secondSameIndex){       \n            if (this.flipped < 2){\n                this.flipped +=1;\n                e.target.parentNode.parentNode.getAttribute(\"data-cardID\");\n                e.target.setAttribute(\"data-cardID\", index);\n                var str = \"script/memory/pics/\" + this.pictures[index] + \".png\";\n                e.target.setAttribute(\"src\", str);          \n            };\n     \n            if (this.flipped === 2){\n                this.clicks += 1;\n                if (this.pictures[index] === this.pictures[this.turnBackAtTimeoutNode1.getAttribute(\"data-cardID\")]){\n                    this.flipped = 0;\n                    this.done += 1;\n                }\n                else{\n                    // start 1 sec timer, flip back turned cards at timeout\n                    var that = this;\n                    setTimeout(this.flippedCardsTimeout, 1000);\n                }\n            }\n        }      \n        if (this.done === this.rows * this.columns / 2 ){\n            var container = document.getElementById(\"container\");\n            var result = document.createElement(\"div\");\n            var text = document.createElement(\"p\");\n            text.innerHTML = \"Du klarade det på \" + this.clicks + \" försök!\";\n            result.appendChild(text); \n            container.appendChild(result); \n        }\n    };\n    \n    \n    \n    this.renderMemoryTable = function(rows, cols, id){\n        \n\n        var i = 0;\n        var j = 0;\n        \n        var gameInstance = document.getElementById(id),\n            memoryBoard = document.createElement(\"div\"),\n            memoryTable = document.createElement(\"table\"),\n            memoryTableBody =  document.createElement(\"tbody\"),\n            memoryTableRow,\n            memoryTableCell,\n            memoryPic,\n            picLink;\n            memoryBoard.classList.add(\"memoryBoard\");\n            memoryTable.classList.add(\"memoryTable\");\n            \n        gameInstance.appendChild(memoryBoard); \n        memoryBoard.appendChild(memoryTable); \n        memoryTable.appendChild(memoryTableBody); \n        for (i=0;i<rows;i+=1){\n            memoryTableRow = document.createElement(\"tr\");                    \n            memoryTableBody.appendChild(memoryTableRow); \n            for (j=0;j<cols;j+=1){\n                memoryTableCell = document.createElement(\"td\");\n                memoryTableCell.setAttribute(\"data-cardID\", i*cols+j);        \n\n                picLink = document.createElement(\"a\");\n                picLink.setAttribute(\"title\", \"Card\");\n                picLink.setAttribute(\"href\", \"#\");               \n\n                memoryPic = document.createElement(\"img\");\n                memoryPic.classList.add(\"imgCard\");                \n                memoryPic.setAttribute(\"src\", \"script/memory/pics/0.png\");\n                memoryPic.classList.add(\"card\");\n                \n                memoryTableCell.appendChild(picLink); \n                picLink.appendChild(memoryPic); \n\n                memoryTableRow.appendChild(memoryTableCell); \n            }\n        }\n    };\n  \n    this.start = function(){\n        that = this;\n        var BoardCollection = document.getElementById(\"BoardCollection\");\n        var GameInstance = document.createElement(\"div\");\n        GameInstance.setAttribute(\"id\", this.game);  // ordning \n        BoardCollection.appendChild(GameInstance);\n        \n        this.pictures = RandomGenerator.getPictureArray(this.rows, this.columns);\n        console.log(this.pictures);\n\n        var node = document.getElementById(this.game);\n        node.onclick = function(e){\n            var index;\n            if (e.target.parentNode.getAttribute(\"title\") === \"Card\"){\n                index = e.target.parentNode.parentNode.getAttribute(\"data-cardID\");\n\n               if (that.flipped < 2){\n                    that.turnCard(e, index);\n                }\n            }\n        };   \n        this.renderMemoryTable(this.rows, this.columns, this.game);\n    }\n}\n\n       \nMemory.prototype = new Window();\n\n\n\nvar MemoryGame = {\n    init: function(){\n        \n        \n    var GameCollection = document.createElement(\"div\"); \n    GameCollection.setAttribute(\"id\", \"BoardCollection\");    \n    document.getElementById(\"container\").appendChild(GameCollection);\n        \n      var mem1 = new Memory(4,4,1);\n      var mem2 = new Memory(4,4,2);\n\n      mem1.start();\n      mem2.start();\n\n    }      \n};\n// window.addEventListener(\"load\", MemoryGame.init);","undoManager":{"mark":99,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":22,"column":65},"end":{"row":22,"column":69},"action":"remove","lines":["pics"]},{"start":{"row":22,"column":65},"end":{"row":22,"column":83},"action":"insert","lines":["script/memory/pics"]}]}],[{"group":"doc","deltas":[{"start":{"row":23,"column":65},"end":{"row":23,"column":69},"action":"remove","lines":["pics"]},{"start":{"row":23,"column":65},"end":{"row":23,"column":83},"action":"insert","lines":["script/memory/pics"]}]}],[{"group":"doc","deltas":[{"start":{"row":46,"column":27},"end":{"row":46,"column":31},"action":"remove","lines":["pics"]},{"start":{"row":46,"column":27},"end":{"row":46,"column":45},"action":"insert","lines":["script/memory/pics"]}]}],[{"group":"doc","deltas":[{"start":{"row":162,"column":0},"end":{"row":162,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":162,"column":1},"end":{"row":162,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":162,"column":2},"end":{"row":162,"column":3},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":0},"end":{"row":146,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":0},"end":{"row":147,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":0},"end":{"row":145,"column":1},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":1},"end":{"row":145,"column":2},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":0},"end":{"row":145,"column":2},"action":"remove","lines":["Me"]},{"start":{"row":145,"column":0},"end":{"row":145,"column":8},"action":"insert","lines":["Memory()"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":7},"end":{"row":145,"column":8},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":6},"end":{"row":145,"column":7},"action":"remove","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":6},"end":{"row":145,"column":7},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":7},"end":{"row":145,"column":8},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":7},"end":{"row":145,"column":8},"action":"remove","lines":["p"]},{"start":{"row":145,"column":7},"end":{"row":145,"column":16},"action":"insert","lines":["prototype"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":16},"end":{"row":145,"column":17},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":17},"end":{"row":145,"column":18},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":18},"end":{"row":145,"column":19},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":19},"end":{"row":145,"column":20},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":20},"end":{"row":145,"column":21},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":21},"end":{"row":145,"column":22},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":22},"end":{"row":145,"column":23},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":23},"end":{"row":145,"column":24},"action":"insert","lines":["W"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":24},"end":{"row":145,"column":25},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":25},"end":{"row":145,"column":26},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":26},"end":{"row":145,"column":27},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":27},"end":{"row":145,"column":28},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":28},"end":{"row":145,"column":29},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":28},"end":{"row":145,"column":29},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":28},"end":{"row":145,"column":29},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":29},"end":{"row":145,"column":31},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":145,"column":31},"end":{"row":145,"column":32},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":0},"end":{"row":146,"column":41},"action":"insert","lines":["function Memory(_rows, _columns, _game) {"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":0},"end":{"row":146,"column":9},"action":"remove","lines":["function "]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":6},"end":{"row":146,"column":7},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":7},"end":{"row":146,"column":8},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":8},"end":{"row":146,"column":9},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":9},"end":{"row":146,"column":10},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":9},"end":{"row":146,"column":10},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":9},"end":{"row":146,"column":10},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":10},"end":{"row":146,"column":11},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":11},"end":{"row":146,"column":12},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":12},"end":{"row":146,"column":13},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":13},"end":{"row":146,"column":14},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":14},"end":{"row":146,"column":15},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":15},"end":{"row":146,"column":16},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":16},"end":{"row":146,"column":17},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":16},"end":{"row":146,"column":17},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":16},"end":{"row":146,"column":17},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":17},"end":{"row":146,"column":18},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":18},"end":{"row":146,"column":19},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":19},"end":{"row":146,"column":20},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":20},"end":{"row":146,"column":21},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":146,"column":47},"end":{"row":147,"column":0},"action":"insert","lines":["",""]},{"start":{"row":147,"column":0},"end":{"row":147,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":4},"end":{"row":147,"column":5},"action":"insert","lines":["}"]},{"start":{"row":147,"column":0},"end":{"row":147,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":0},"end":{"row":149,"column":0},"action":"insert","lines":["","    ",""]}]}],[{"group":"doc","deltas":[{"start":{"row":147,"column":0},"end":{"row":149,"column":26},"action":"insert","lines":["        this.rows = _rows;","        this.columns = _columns;  ","        this.game = _game;"]}]}],[{"group":"doc","deltas":[{"start":{"row":150,"column":0},"end":{"row":150,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":150,"column":0},"end":{"row":151,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":0},"end":{"row":5,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":5,"column":1},"end":{"row":5,"column":2},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":7,"column":26},"end":{"row":8,"column":0},"action":"insert","lines":["",""]},{"start":{"row":8,"column":0},"end":{"row":8,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":0},"end":{"row":8,"column":1},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":1},"end":{"row":8,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":16},"end":{"row":2,"column":38},"action":"remove","lines":["_rows, _columns, _game"]}]}],[{"group":"doc","deltas":[{"start":{"row":3,"column":0},"end":{"row":4,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":0},"end":{"row":6,"column":4},"action":"remove","lines":["/*  "]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":9,"column":1},"action":"remove","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":0},"end":{"row":9,"column":1},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":0},"end":{"row":6,"column":1},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":6,"column":1},"end":{"row":6,"column":2},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":0},"end":{"row":4,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":4},"end":{"row":4,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":8},"end":{"row":4,"column":9},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":8},"end":{"row":4,"column":9},"action":"remove","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":8},"end":{"row":4,"column":9},"action":"insert","lines":["W"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":9},"end":{"row":4,"column":10},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":10},"end":{"row":4,"column":11},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":11},"end":{"row":4,"column":12},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":12},"end":{"row":4,"column":13},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":13},"end":{"row":4,"column":14},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":13},"end":{"row":4,"column":14},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":13},"end":{"row":4,"column":14},"action":"insert","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":14},"end":{"row":4,"column":16},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":16},"end":{"row":4,"column":17},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":14},"end":{"row":4,"column":15},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":15},"end":{"row":4,"column":16},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":16},"end":{"row":4,"column":17},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":17},"end":{"row":4,"column":18},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":18},"end":{"row":4,"column":19},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":20},"end":{"row":4,"column":21},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":21},"end":{"row":4,"column":22},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":22},"end":{"row":4,"column":23},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":23},"end":{"row":4,"column":24},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":24},"end":{"row":4,"column":25},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":24},"end":{"row":4,"column":25},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":22},"end":{"row":148,"column":44},"action":"remove","lines":["_rows, _columns, _game"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":16},"end":{"row":2,"column":38},"action":"insert","lines":["_rows, _columns, _game"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":0},"end":{"row":152,"column":1},"action":"remove","lines":["Memory.prototype.args() {","        this.rows = _rows;","        this.columns = _columns;  ","        this.game = _game;","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":148,"column":0},"end":{"row":149,"column":0},"action":"insert","lines":["",""]}]}]]},"ace":{"folds":[],"scrolltop":2280,"scrollleft":0,"selection":{"start":{"row":155,"column":0},"end":{"row":157,"column":69},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1420042312703}