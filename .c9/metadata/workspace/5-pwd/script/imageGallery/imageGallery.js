{"changed":true,"filter":false,"title":"imageGallery.js","tooltip":"/5-pwd/script/imageGallery/imageGallery.js","value":"\"use strict\";\n\nfunction ImageGallery(_instance) {\n    var that = this;\n    \n    Window.call(this,\"css/pics/pictures.png\", \"ImageGallery\", _instance);\n    this.instanceId = _instance;\n    this.responseObjects;    \n \n    this.nextURL = \"http://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/\";        \n    this.thumbURL = 0;\n    this.thumbHeight = 0;\n    this.thumbWidth = 0;\n    this.pictureHeight = 0;\n    this.pictureWidth = 0;\n \n    \n    this.start = function(){\n        var windowInstance = document.getElementById(this.windowId);\n\n        var xhr = new XMLHttpRequest();\n        \n        xhr.onreadystatechange = function(){\n            if ((xhr.readyState === 4) && (xhr.status === 200)) {\n                console.log(xhr.responseText);   \n                that.responseObjects = JSON.parse(xhr.responseText);\n                that.addThumbs(that.responseObjects, that.instanceId);  \n                var loadIcon = document.getElementById(\"loadIcon\"+that.instanceId);\n                loadIcon.parentNode.removeChild(loadIcon);\n            }\n        };\n//        var loadIcon = document.getElementById(\"loadIcon\"+this.instanceId);\n//        loadIcon.classList.add(\"loading\");        \n        xhr.open(\"GET\", this.nextURL, true);\n        xhr.send(null);\n\n        \n        \n\n\n    };            \n    this.addThumbs = function(_thumbObjArray, _instance){\n        var windowInstanceMain = document.getElementById(\"WindowMain\"+that.instanceId);\n        var maxThumbWidth = 0;\n        var maxThumbHeight = 0;\n        var index = 0;        \n        for (index; index < _thumbObjArray.length; index+=1) {\n            if (_thumbObjArray[index].thumbWidth > maxThumbWidth)\n                maxThumbWidth = _thumbObjArray[index].thumbWidth;\n            if (_thumbObjArray[index].thumbHeight > maxThumbHeight)\n                maxThumbHeight = _thumbObjArray[index].thumbHeight;\n        }\n/*        \n        _thumbObjArray[index].thumbURL\n        _thumbObjArray[index].thumbWidth\n        _thumbObjArray[index].thumbHeight\n        _thumbObjArray[index].URL\n        _thumbObjArray[index].Width\n        _thumbObjArray[index].Height\n*/\n        var thumbGallery = document.createElement(\"div\");\n        thumbGallery.classList.add(\"imgGallery\");\n    \n        windowInstanceMain.appendChild(thumbGallery);\n\n\n        for (index=0; index < _thumbObjArray.length; index+=1) {\n            \n            var thumbCell = document.createElement(\"div\");\n            thumbCell.classList.add(\"thumbCell\");\n            thumbCell.style.height = (maxThumbHeight+2)+\"px\";\n            thumbCell.style.width = (maxThumbWidth+2)+\"px\";\n            \n            thumbGallery.appendChild(thumbCell);\n            \n            var thumbWrapper = document.createElement(\"div\");            \n            thumbWrapper.classList.add(\"thumbWrapper\");\n            thumbWrapper.style.width = _thumbObjArray[index].thumbWidth+\"px\";              \n            thumbCell.appendChild(thumbWrapper);\n            \n            var thumbLink = document.createElement(\"a\");\n            thumbLink.classList.add(\"thumbPicLink\");\n            thumbLink.setAttribute(\"href\", \"#\");\n    \n//            windowInstance.appendChild(newThumbLink);\n            thumbWrapper.appendChild(thumbLink);\n    \n            var thumbImg = document.createElement(\"img\");\n            thumbImg.classList.add(\"thumbPicImg\");\n            thumbImg.setAttribute(\"title\",\"thumbPicImg\");\n            thumbImg.setAttribute(\"ThumbId\", index);                \n            thumbImg.setAttribute(\"src\", _thumbObjArray[index].thumbURL);\n          \n \n            \n            thumbLink.appendChild(thumbImg);\n        \n            thumbImg.onclick = function(e){\n                var index;\n                if (e.target.getAttribute(\"title\") === \"thumbPicImg\"){\n                    index = e.target.getAttribute(\"ThumbId\");\n\n\n                    var windowInstance = new ImageGallery(++Projekt.instanceId);  \n                    var imageWindow = document.getElementById(\"Window\"+Projekt.instanceId);                    \n                    var imageWindowMain = document.getElementById(\"WindowMain\"+Projekt.instanceId);                    \n                    imageWindow.style.height = (_thumbObjArray[index].height+52)+\"px\";\n                    imageWindow.style.width = (_thumbObjArray[index].width+8)+\"px\";\n               \n                    var imageLink = document.createElement(\"a\");\n                    imageLink.classList.add(\"imageLink\");\n                    imageLink.setAttribute(\"href\", \"#\");\n                    imageWindowMain.appendChild(imageLink);\n            \n                    var image = document.createElement(\"img\");\n                    image.classList.add(\"image\");\n                    image.setAttribute(\"title\",\"image\");\n                    image.setAttribute(\"src\", _thumbObjArray[index].URL);\n                    imageLink.appendChild(image);                    \n                }\n            };  \n        };    \n    };   \n};\n       \nImageGallery.prototype = new Window();\n\n","undoManager":{"mark":99,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":34,"column":30},"end":{"row":34,"column":31},"action":"insert","lines":["\""]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":39},"end":{"row":34,"column":40},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":40},"end":{"row":34,"column":41},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":41},"end":{"row":34,"column":43},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":42},"end":{"row":34,"column":43},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":43},"end":{"row":34,"column":44},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":44},"end":{"row":34,"column":45},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":45},"end":{"row":34,"column":46},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":17},"end":{"row":34,"column":29},"action":"remove","lines":["setAttribute"]},{"start":{"row":34,"column":17},"end":{"row":34,"column":18},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":18},"end":{"row":34,"column":19},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":19},"end":{"row":34,"column":20},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":20},"end":{"row":34,"column":21},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":21},"end":{"row":34,"column":22},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":22},"end":{"row":34,"column":23},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":22},"end":{"row":34,"column":23},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":17},"end":{"row":34,"column":22},"action":"remove","lines":["class"]},{"start":{"row":34,"column":17},"end":{"row":34,"column":30},"action":"insert","lines":["classList.add"]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":40},"end":{"row":34,"column":48},"action":"remove","lines":[", \"true\""]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":0},"end":{"row":28,"column":42},"action":"insert","lines":["        var loadIcon = document.getElementById(\"loadIcon\"+this.instanceId);","        loadIcon.classList.add(\"loading\");"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"insert","lines":["    "]},{"start":{"row":28,"column":0},"end":{"row":28,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"insert","lines":["    "]},{"start":{"row":28,"column":0},"end":{"row":28,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"insert","lines":["    "]},{"start":{"row":28,"column":0},"end":{"row":28,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"remove","lines":["    "]},{"start":{"row":28,"column":0},"end":{"row":28,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":66},"end":{"row":27,"column":70},"action":"remove","lines":["this"]},{"start":{"row":27,"column":66},"end":{"row":27,"column":67},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":67},"end":{"row":27,"column":68},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":68},"end":{"row":27,"column":69},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":69},"end":{"row":27,"column":70},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":37},"end":{"row":28,"column":38},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":36},"end":{"row":28,"column":37},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":35},"end":{"row":28,"column":36},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":34},"end":{"row":28,"column":35},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":34},"end":{"row":28,"column":35},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":35},"end":{"row":28,"column":36},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":34},"end":{"row":28,"column":35},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":35},"end":{"row":28,"column":36},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":36},"end":{"row":28,"column":37},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":37},"end":{"row":28,"column":38},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":38},"end":{"row":28,"column":39},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":39},"end":{"row":28,"column":40},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":41},"end":{"row":28,"column":42},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":41},"end":{"row":28,"column":42},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":34,"column":0},"end":{"row":35,"column":42},"action":"remove","lines":["        var loadIcon = document.getElementById(\"loadIcon\"+this.instanceId);","        loadIcon.classList.add(\"loading\");"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":0},"end":{"row":32,"column":42},"action":"insert","lines":["        var loadIcon = document.getElementById(\"loadIcon\"+this.instanceId);","        loadIcon.classList.add(\"loading\");"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":0},"end":{"row":28,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":1},"end":{"row":28,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":0},"end":{"row":28,"column":1},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":0},"end":{"row":28,"column":1},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":43},"end":{"row":28,"column":50},"action":"remove","lines":["loading"]},{"start":{"row":28,"column":43},"end":{"row":28,"column":44},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":44},"end":{"row":28,"column":45},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":45},"end":{"row":28,"column":46},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":46},"end":{"row":28,"column":47},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":47},"end":{"row":28,"column":48},"action":"insert","lines":["I"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":49},"end":{"row":28,"column":50},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":50},"end":{"row":28,"column":51},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":0},"end":{"row":31,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":1},"end":{"row":31,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":32,"column":0},"end":{"row":32,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":32,"column":1},"end":{"row":32,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":25},"end":{"row":28,"column":26},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":26},"end":{"row":28,"column":27},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":27},"end":{"row":28,"column":28},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":28},"end":{"row":28,"column":29},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":29},"end":{"row":28,"column":30},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":30},"end":{"row":28,"column":31},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":31},"end":{"row":28,"column":32},"action":"insert","lines":["N"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":32},"end":{"row":28,"column":33},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":33},"end":{"row":28,"column":34},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":34},"end":{"row":28,"column":35},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":35},"end":{"row":28,"column":36},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":36},"end":{"row":28,"column":37},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":37},"end":{"row":28,"column":38},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":38},"end":{"row":28,"column":39},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":39},"end":{"row":28,"column":40},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":41},"end":{"row":28,"column":42},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":42},"end":{"row":28,"column":43},"action":"insert","lines":["C"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":43},"end":{"row":28,"column":44},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":44},"end":{"row":28,"column":45},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":45},"end":{"row":28,"column":46},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":46},"end":{"row":28,"column":47},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":47},"end":{"row":28,"column":48},"action":"insert","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["L"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"remove","lines":["("]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":48},"end":{"row":28,"column":58},"action":"remove","lines":["\"loadIcon\""]},{"start":{"row":28,"column":48},"end":{"row":28,"column":56},"action":"insert","lines":["loadIcon"]}]}],[{"group":"doc","deltas":[{"start":{"row":8,"column":0},"end":{"row":8,"column":42},"action":"remove","lines":["    this.windowId = \"Window\"+_instance;   "]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":8,"column":0},"end":{"row":8,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1420394323914}