{"changed":true,"filter":false,"title":"imageGallery.js","tooltip":"/5-pwd/script/imageGallery/imageGallery.js","value":"\"use strict\";\n\nfunction ImageGallery(_instance) {\n    var that = this;\n    \n    Window.call(this, \"ImageGallery\", _instance);\n    this.instanceId = _instance;\n    this.responseObjects;    \n    this.windowId = \"Window\"+_instance;    \n    this.nextURL = \"http://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/\";        \n    this.thumbURL = 0;\n    this.thumbHeight = 0;\n    this.thumbWidth = 0;\n    this.pictureHeight = 0;\n    this.pictureWidth = 0;\n \n    \n    this.start = function(){\n        var windowInstance = document.getElementById(this.windowId);\n\n        var xhr = new XMLHttpRequest();\n        \n        xhr.onreadystatechange = function(){\n            if ((xhr.readyState === 4) && (xhr.status === 200)) {\n                console.log(xhr.responseText);   \n                that.responseObjects = JSON.parse(xhr.responseText);\n                that.addThumbs(that.responseObjects, that.instanceId);  \n\n            }\n        };\n        \n        xhr.open(\"GET\", this.nextURL, true);\n        xhr.send(null);\n        \n        \n\n\n    };            \n    this.addThumbs = function(_thumbObjArray, _instance){\n        var windowInstanceMain = document.getElementById(\"WindowMain\"+that.instanceId);\n\n/*        \n        _thumbObjArray[index].thumbURL\n        _thumbObjArray[index].thumbWidth\n        _thumbObjArray[index].thumbHeight\n        _thumbObjArray[index].URL\n        _thumbObjArray[index].Width\n        _thumbObjArray[index].Height\n*/\n        var thumbGallery = document.createElement(\"div\");\n        thumbGallery.classList.add(\"imgGallery\");\n    \n        windowInstanceMain.appendChild(thumbGallery);\n        \n        var index = 0;\n        for (index; index < _thumbObjArray.length; index+=1) {\n\n            var thumbLink = document.createElement(\"a\");\n            thumbLink.classList.add(\"thumbPicLink\");\n            thumbLink.setAttribute(\"href\", \"#\");\n    \n//            windowInstance.appendChild(newThumbLink);\n            thumbGallery.appendChild(thumbLink);\n    \n            var thumbImg = document.createElement(\"img\");\n            thumbImg.classList.add(\"thumbPicImg\");\n            thumbImg.setAttribute(\"title\",\"thumbPicImg\");\n            thumbImg.setAttribute(\"ThumbId\", index);                \n            thumbImg.setAttribute(\"src\", _thumbObjArray[index].thumbURL);\n            \n            newThumbLink.appendChild(thumbImg);\n        \n            thumbImg.onclick = function(e){\n                var index;\n                if (e.target.getAttribute(\"title\") === \"thumbPicImg\"){\n                    index = e.target.getAttribute(\"ThumbId\");\n\n\n                    var windowInstance = new ImageGallery(++Projekt.instanceId);  \n                    var imageWindow = document.getElementById(\"Window\"+Projekt.instanceId);                    \n                    var imageWindowMain = document.getElementById(\"WindowMain\"+Projekt.instanceId);                    \n                    imageWindow.style.height = (_thumbObjArray[index].height+52)+\"px\";\n                    imageWindow.style.width = (_thumbObjArray[index].width+8)+\"px\";\n               \n                    var imageLink = document.createElement(\"a\");\n                    imageLink.classList.add(\"imageLink\");\n                    imageLink.setAttribute(\"href\", \"#\");\n                    imageWindowMain.appendChild(imageLink);\n            \n                    var image = document.createElement(\"img\");\n                    image.classList.add(\"image\");\n                    image.setAttribute(\"title\",\"image\");\n                    image.setAttribute(\"src\", _thumbObjArray[index].URL);\n                    imageLink.appendChild(image);                    \n                }\n            };  \n        };    \n    };   \n};\n       \nImageGallery.prototype = new Window();\n\n","undoManager":{"mark":42,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":49,"column":15},"end":{"row":49,"column":16},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":16},"end":{"row":49,"column":17},"action":"insert","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":4},"end":{"row":69,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":8},"end":{"row":69,"column":9},"action":"insert","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":9},"end":{"row":69,"column":10},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":9},"end":{"row":69,"column":10},"action":"remove","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":8},"end":{"row":69,"column":9},"action":"remove","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":95,"column":4},"end":{"row":95,"column":5},"action":"insert","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":95,"column":5},"end":{"row":95,"column":6},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":0},"end":{"row":55,"column":49},"action":"remove","lines":["            newThumb.classList.add(\"imgGallery\");","            newThumb.setAttribute(\"title\", \"thumbPicImg\");        ","            newThumb.setAttribute(\"ThumbId\", index);        ","            windowInstance.appendChild(newThumb);"]}]}],[{"group":"doc","deltas":[{"start":{"row":48,"column":2},"end":{"row":49,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":0},"end":{"row":52,"column":49},"action":"insert","lines":["            newThumb.classList.add(\"imgGallery\");","            newThumb.setAttribute(\"title\", \"thumbPicImg\");        ","            newThumb.setAttribute(\"ThumbId\", index);        ","            windowInstance.appendChild(newThumb);"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":0},"end":{"row":49,"column":4},"action":"remove","lines":["    "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":4},"action":"remove","lines":["    "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"remove","lines":["    "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":55,"column":0},"end":{"row":55,"column":57},"action":"remove","lines":["            var newThumb = document.createElement(\"div\");"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":0},"end":{"row":50,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":0},"end":{"row":49,"column":57},"action":"insert","lines":["            var newThumb = document.createElement(\"div\");"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":0},"end":{"row":49,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":63,"column":0},"end":{"row":63,"column":45},"action":"insert","lines":["        windowInstance.appendChild(newThumb);"]}]}],[{"group":"doc","deltas":[{"start":{"row":63,"column":45},"end":{"row":63,"column":57},"action":"remove","lines":["            "]},{"start":{"row":63,"column":45},"end":{"row":64,"column":0},"action":"insert","lines":["",""]},{"start":{"row":64,"column":0},"end":{"row":64,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":63,"column":0},"end":{"row":63,"column":4},"action":"insert","lines":["    "]},{"start":{"row":64,"column":0},"end":{"row":64,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":0},"end":{"row":64,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":1},"end":{"row":64,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":63,"column":39},"end":{"row":63,"column":47},"action":"remove","lines":["newThumb"]},{"start":{"row":63,"column":39},"end":{"row":63,"column":51},"action":"insert","lines":["newThumbLink"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":0},"end":{"row":49,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":1},"end":{"row":49,"column":2},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":53,"column":45},"end":{"row":54,"column":0},"action":"insert","lines":["",""]},{"start":{"row":54,"column":0},"end":{"row":54,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":0},"end":{"row":54,"column":1},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":1},"end":{"row":54,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":0},"end":{"row":49,"column":1},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":0},"end":{"row":49,"column":1},"action":"remove","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":0},"end":{"row":54,"column":1},"action":"remove","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":54,"column":0},"end":{"row":54,"column":1},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":0},"end":{"row":65,"column":1},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":0},"end":{"row":65,"column":1},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":0},"end":{"row":64,"column":1},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":1},"end":{"row":64,"column":2},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":0},"end":{"row":52,"column":52},"action":"remove","lines":["        newThumb.setAttribute(\"title\", \"thumbPicImg\");        ","        newThumb.setAttribute(\"ThumbId\", index);    "]}]}],[{"group":"doc","deltas":[{"start":{"row":68,"column":60},"end":{"row":69,"column":0},"action":"insert","lines":["",""]},{"start":{"row":69,"column":0},"end":{"row":69,"column":12},"action":"insert","lines":["            "]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":0},"end":{"row":70,"column":52},"action":"insert","lines":["        newThumb.setAttribute(\"title\", \"thumbPicImg\");        ","        newThumb.setAttribute(\"ThumbId\", index);    "]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":0},"end":{"row":69,"column":4},"action":"insert","lines":["    "]},{"start":{"row":70,"column":0},"end":{"row":70,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":0},"end":{"row":70,"column":0},"action":"remove","lines":["            newThumb.setAttribute(\"title\", \"thumbPicImg\");        ",""]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":12},"end":{"row":69,"column":20},"action":"remove","lines":["newThumb"]},{"start":{"row":69,"column":12},"end":{"row":69,"column":23},"action":"insert","lines":["newThumbImg"]}]}],[{"group":"doc","deltas":[{"start":{"row":77,"column":37},"end":{"row":77,"column":59},"action":"remove","lines":["parentNode.parentNode."]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":20},"end":{"row":49,"column":21},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":21},"end":{"row":49,"column":22},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":22},"end":{"row":49,"column":23},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":23},"end":{"row":49,"column":24},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":24},"end":{"row":49,"column":25},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":25},"end":{"row":49,"column":26},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":26},"end":{"row":49,"column":27},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":16},"end":{"row":50,"column":17},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":17},"end":{"row":50,"column":18},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":18},"end":{"row":50,"column":19},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":19},"end":{"row":50,"column":20},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":20},"end":{"row":50,"column":21},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":21},"end":{"row":50,"column":22},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":22},"end":{"row":50,"column":23},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":35},"end":{"row":52,"column":43},"action":"remove","lines":["newThumb"]},{"start":{"row":52,"column":35},"end":{"row":52,"column":50},"action":"insert","lines":["newThumbGallery"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":26},"end":{"row":39,"column":27},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":27},"end":{"row":39,"column":28},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":28},"end":{"row":39,"column":29},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":29},"end":{"row":39,"column":30},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":22},"end":{"row":52,"column":23},"action":"insert","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":23},"end":{"row":52,"column":24},"action":"insert","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":24},"end":{"row":52,"column":25},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":25},"end":{"row":52,"column":26},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":25},"end":{"row":52,"column":26},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":24},"end":{"row":52,"column":25},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":23},"end":{"row":52,"column":24},"action":"remove","lines":["A"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":23},"end":{"row":52,"column":24},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":24},"end":{"row":52,"column":25},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":25},"end":{"row":52,"column":26},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":56,"column":0},"end":{"row":58,"column":12},"action":"remove","lines":["","","            "]}]}],[{"group":"doc","deltas":[{"start":{"row":62,"column":12},"end":{"row":62,"column":20},"action":"remove","lines":["newThumb"]},{"start":{"row":62,"column":12},"end":{"row":62,"column":27},"action":"insert","lines":["newThumbGallery"]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":18},"end":{"row":64,"column":19},"action":"remove","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":17},"end":{"row":64,"column":18},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":16},"end":{"row":64,"column":17},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":16},"end":{"row":64,"column":17},"action":"remove","lines":["T"]}]}],[{"group":"doc","deltas":[{"start":{"row":64,"column":16},"end":{"row":64,"column":17},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":65,"column":12},"end":{"row":65,"column":23},"action":"remove","lines":["newThumbImg"]},{"start":{"row":65,"column":12},"end":{"row":65,"column":20},"action":"insert","lines":["thumbImg"]}]}],[{"group":"doc","deltas":[{"start":{"row":66,"column":12},"end":{"row":66,"column":23},"action":"remove","lines":["newThumbImg"]},{"start":{"row":66,"column":12},"end":{"row":66,"column":20},"action":"insert","lines":["thumbImg"]}]}],[{"group":"doc","deltas":[{"start":{"row":67,"column":12},"end":{"row":67,"column":23},"action":"remove","lines":["newThumbImg"]},{"start":{"row":67,"column":12},"end":{"row":67,"column":20},"action":"insert","lines":["thumbImg"]}]}],[{"group":"doc","deltas":[{"start":{"row":68,"column":12},"end":{"row":68,"column":23},"action":"remove","lines":["newThumbImg"]},{"start":{"row":68,"column":12},"end":{"row":68,"column":20},"action":"insert","lines":["thumbImg"]}]}],[{"group":"doc","deltas":[{"start":{"row":70,"column":37},"end":{"row":70,"column":48},"action":"remove","lines":["newThumbImg"]},{"start":{"row":70,"column":37},"end":{"row":70,"column":45},"action":"insert","lines":["thumbImg"]}]}],[{"group":"doc","deltas":[{"start":{"row":72,"column":12},"end":{"row":72,"column":23},"action":"remove","lines":["newThumbImg"]},{"start":{"row":72,"column":12},"end":{"row":72,"column":20},"action":"insert","lines":["thumbImg"]}]}],[{"group":"doc","deltas":[{"start":{"row":62,"column":15},"end":{"row":62,"column":16},"action":"remove","lines":["T"]}]}],[{"group":"doc","deltas":[{"start":{"row":62,"column":14},"end":{"row":62,"column":15},"action":"remove","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":62,"column":13},"end":{"row":62,"column":14},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":62,"column":12},"end":{"row":62,"column":13},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":62,"column":12},"end":{"row":62,"column":13},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":49,"column":12},"end":{"row":49,"column":27},"action":"remove","lines":["newThumbGallery"]},{"start":{"row":49,"column":12},"end":{"row":49,"column":24},"action":"insert","lines":["thumbGallery"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":8},"end":{"row":50,"column":23},"action":"remove","lines":["newThumbGallery"]},{"start":{"row":50,"column":8},"end":{"row":50,"column":20},"action":"insert","lines":["thumbGallery"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":39},"end":{"row":52,"column":54},"action":"remove","lines":["newThumbGallery"]},{"start":{"row":52,"column":39},"end":{"row":52,"column":51},"action":"insert","lines":["thumbGallery"]}]}],[{"group":"doc","deltas":[{"start":{"row":57,"column":19},"end":{"row":57,"column":20},"action":"remove","lines":["T"]}]}],[{"group":"doc","deltas":[{"start":{"row":57,"column":18},"end":{"row":57,"column":19},"action":"remove","lines":["w"]}]}],[{"group":"doc","deltas":[{"start":{"row":57,"column":17},"end":{"row":57,"column":18},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":57,"column":16},"end":{"row":57,"column":17},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":57,"column":16},"end":{"row":57,"column":17},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":58,"column":12},"end":{"row":58,"column":24},"action":"remove","lines":["newThumbLink"]},{"start":{"row":58,"column":12},"end":{"row":58,"column":21},"action":"insert","lines":["thumbLink"]}]}],[{"group":"doc","deltas":[{"start":{"row":59,"column":12},"end":{"row":59,"column":24},"action":"remove","lines":["newThumbLink"]},{"start":{"row":59,"column":12},"end":{"row":59,"column":21},"action":"insert","lines":["thumbLink"]}]}],[{"group":"doc","deltas":[{"start":{"row":62,"column":37},"end":{"row":62,"column":49},"action":"remove","lines":["newThumbLink"]},{"start":{"row":62,"column":37},"end":{"row":62,"column":46},"action":"insert","lines":["thumbLink"]}]}]]},"ace":{"folds":[],"scrolltop":769.5,"scrollleft":0,"selection":{"start":{"row":62,"column":46},"end":{"row":62,"column":46},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1420379531644}