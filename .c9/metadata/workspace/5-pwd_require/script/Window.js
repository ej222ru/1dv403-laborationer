{"changed":true,"filter":false,"title":"Window.js","tooltip":"/5-pwd_require/script/Window.js","value":"\"use strict\";\ndefine([\"projekt\", \"start\"], function(projekt, start){\nvar Window = function(_iconURL, _name, _instance) {\n    this.instanceId = _instance;\n\n    this.windowId = \"Window\"+_instance;   \n    this.windowMainId = \"WindowMain\"+_instance;  \n    var that = this;\n    \n    this.calculateWindowPosition = function(_instance) {\n        \n        var posContent = this.getObjectPosition(document.getElementById(\"content\"));\n        var newWindow = document.getElementById(that.windowId);        \n        newWindow.style.left = posContent.xl + (Projekt.newStartPositions * 300)+(++Projekt.xl)*20 + 'px';\n        newWindow.style.top = posContent.yt + (++Projekt.yt*20) + 'px';          \n\n        var posWindow = this.getObjectPosition(newWindow);\n        if ((posWindow.xl < posContent.xl) ||\n            (posWindow.xr > posContent.xr) || \n            (posWindow.yt < posContent.yt) ||\n            (posWindow.yb > posContent.yb)){\n            \n                this.startNewPosition(document.getElementById(that.windowId));\n        }        \n    };\n    \n    this.startNewPosition = function(newWindow){\n        Projekt.newStartPositions +=1;\n        Projekt.yt = 0;\n        Projekt.xl = 0;\n        \n        \n        var posContent = this.getObjectPosition(document.getElementById(\"content\"));\n      \n        newWindow.style.left = (posContent.xl + (Projekt.newStartPositions * 300) + 20) + 'px';\n        newWindow.style.top = (posContent.yt + (++Projekt.yt*20)) + 'px';    \n\n        var posWindow = this.getObjectPosition(newWindow);        \n        if ((posWindow.xl < posContent.xl) ||\n            (posWindow.xr > posContent.xr) || \n            (posWindow.yt < posContent.yt) ||\n            (posWindow.yb > posContent.yb)){\n                \n                Projekt.newStartPositions = 0;                \n                newWindow.style.left = (posContent.xl + (Projekt.newStartPositions * 300) + 60) + 'px';    \n                newWindow.style.top = (posContent.yt + (++Projekt.yt*30)) + 'px';    \n        }        \n    }; \n    \n    this.getObjectPosition = function (object) {\n\n        return {\n          xl : object.offsetLeft,\n          xr : object.offsetLeft + object.offsetWidth,\n          yt : object.offsetTop,\n          yb : object.offsetTop + object.offsetHeight\n        };\n    };    \n    // Creata nodes in the DOM. By encapsulating they dont run at load  \n    this.initiateWindow = function(){  \n\n        var windowInst = document.createElement(\"div\"); \n        windowInst.setAttribute(\"id\", this.windowId);\n        windowInst.classList.add(\"Window\");    \n        windowInst.setAttribute(\"title\", \"Window\");\n        windowInst.style.zIndex = 2;    \n        document.getElementById(\"content\").appendChild(windowInst);\n    \n        var topLabel = document.createElement(\"div\"); \n        topLabel.classList.add(\"topLabel\");    \n        windowInst.appendChild(topLabel);\n    \n        var icon = document.createElement(\"img\");    \n        icon.classList.add(\"labelIcon\");\n        icon.setAttribute(\"src\", _iconURL);    \n        topLabel.appendChild(icon);     \n        \n        var name = document.createElement(\"div\");\n        name.classList.add(\"appName\");    \n        name.innerHTML = _name;\n        topLabel.appendChild(name);     \n    \n        var remLink = document.createElement(\"a\");\n        var remPic = document.createElement(\"img\");    \n        remPic.classList.add(\"imgClose\");\n        remPic.setAttribute(\"src\", \"css/pics/remove_16.png\");    \n        remLink.setAttribute(\"title\", \"Close\");\n        remLink.setAttribute(\"href\", \"#\");\n        remLink.appendChild(remPic);    \n        topLabel.appendChild(remLink);     \n        \n        var windowMain = document.createElement(\"div\"); \n        windowMain.classList.add(\"windowMain\");    \n        windowMain.setAttribute(\"title\", \"Main\");\n        windowMain.setAttribute(\"id\", this.windowMainId);\n        windowInst.appendChild(windowMain);\n    \n        \n        var bottomLabel = document.createElement(\"div\"); \n        bottomLabel.classList.add(\"bottomLabel\");    \n        bottomLabel.setAttribute(\"title\", \"Status\");\n    \n        var loadIcon = document.createElement(\"img\");    \n        loadIcon.classList.add(\"loadIcon\");\n        loadIcon.setAttribute(\"id\",\"loadIcon\"+_instance);    \n        loadIcon.setAttribute(\"src\", \"css/pics/ajax-loader.gif\");    \n        bottomLabel.appendChild(loadIcon);     \n        \n        \n        windowInst.appendChild(bottomLabel);\n    \n        this.calculateWindowPosition(this.instanceId);    \n    };\n    \n}\nreturn Window;\n});\n","undoManager":{"mark":88,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":4,"column":26},"end":{"row":4,"column":27},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":25},"end":{"row":4,"column":26},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":24},"end":{"row":4,"column":25},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":23},"end":{"row":4,"column":24},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":23},"end":{"row":4,"column":24},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":24},"end":{"row":4,"column":25},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":25},"end":{"row":4,"column":26},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":26},"end":{"row":4,"column":27},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":27},"end":{"row":4,"column":28},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":28},"end":{"row":4,"column":29},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":29},"end":{"row":4,"column":30},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":9},"end":{"row":4,"column":19},"action":"remove","lines":["instanceId"]},{"start":{"row":4,"column":9},"end":{"row":4,"column":10},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":10},"end":{"row":4,"column":11},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":11},"end":{"row":4,"column":12},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":12},"end":{"row":4,"column":13},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":13},"end":{"row":4,"column":14},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":14},"end":{"row":4,"column":15},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":15},"end":{"row":4,"column":16},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":48},"end":{"row":14,"column":49},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":49},"end":{"row":14,"column":50},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":50},"end":{"row":14,"column":51},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":51},"end":{"row":14,"column":52},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":52},"end":{"row":14,"column":53},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":50},"end":{"row":2,"column":51},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":48},"end":{"row":2,"column":58},"action":"remove","lines":[", _projekt"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":15},"end":{"row":28,"column":16},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":14},"end":{"row":28,"column":15},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":13},"end":{"row":28,"column":14},"action":"remove","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":12},"end":{"row":28,"column":13},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":11},"end":{"row":28,"column":12},"action":"remove","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":10},"end":{"row":28,"column":11},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":9},"end":{"row":28,"column":10},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":8},"end":{"row":28,"column":9},"action":"remove","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":53},"end":{"row":14,"column":54},"action":"remove","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":52},"end":{"row":14,"column":53},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":51},"end":{"row":14,"column":52},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":50},"end":{"row":14,"column":51},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":49},"end":{"row":14,"column":50},"action":"remove","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":48},"end":{"row":14,"column":49},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":48},"end":{"row":14,"column":49},"action":"insert","lines":["P"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":49},"end":{"row":15,"column":50},"action":"remove","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":49},"end":{"row":15,"column":50},"action":"insert","lines":["P"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":91},"end":{"row":14,"column":92},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":90},"end":{"row":14,"column":91},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":89},"end":{"row":14,"column":90},"action":"remove","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":88},"end":{"row":14,"column":89},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":87},"end":{"row":14,"column":88},"action":"remove","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":86},"end":{"row":14,"column":87},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":85},"end":{"row":14,"column":86},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":84},"end":{"row":14,"column":85},"action":"remove","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":0},"end":{"row":4,"column":28},"action":"remove","lines":["    this.projekt = _projekt;"]}]}],[{"group":"doc","deltas":[{"start":{"row":4,"column":0},"end":{"row":5,"column":4},"action":"remove","lines":["","    "]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":17},"end":{"row":1,"column":18},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":18},"end":{"row":1,"column":19},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":19},"end":{"row":1,"column":21},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":20},"end":{"row":1,"column":21},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":21},"end":{"row":1,"column":22},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":22},"end":{"row":1,"column":23},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":23},"end":{"row":1,"column":24},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":24},"end":{"row":1,"column":25},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":24},"end":{"row":1,"column":25},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":23},"end":{"row":1,"column":24},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":22},"end":{"row":1,"column":23},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":22},"end":{"row":1,"column":23},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":23},"end":{"row":1,"column":24},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":24},"end":{"row":1,"column":25},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":45},"end":{"row":1,"column":46},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":46},"end":{"row":1,"column":47},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":47},"end":{"row":1,"column":48},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":48},"end":{"row":1,"column":49},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":49},"end":{"row":1,"column":50},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":50},"end":{"row":1,"column":51},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":51},"end":{"row":1,"column":52},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":48},"end":{"row":13,"column":49},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":49},"end":{"row":13,"column":50},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":50},"end":{"row":13,"column":51},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":51},"end":{"row":13,"column":52},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":51},"end":{"row":13,"column":52},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":50},"end":{"row":13,"column":51},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":50},"end":{"row":13,"column":51},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":51},"end":{"row":13,"column":52},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":52},"end":{"row":13,"column":53},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":53},"end":{"row":13,"column":54},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":90},"end":{"row":13,"column":91},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":91},"end":{"row":13,"column":92},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":92},"end":{"row":13,"column":93},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":93},"end":{"row":13,"column":94},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":94},"end":{"row":13,"column":95},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":95},"end":{"row":13,"column":96},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":48},"end":{"row":13,"column":49},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":48},"end":{"row":13,"column":49},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":48},"end":{"row":13,"column":49},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":48},"end":{"row":13,"column":49},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":48},"end":{"row":13,"column":49},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":48},"end":{"row":13,"column":49},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":84},"end":{"row":13,"column":85},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":84},"end":{"row":13,"column":85},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":84},"end":{"row":13,"column":85},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":84},"end":{"row":13,"column":85},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":84},"end":{"row":13,"column":85},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":84},"end":{"row":13,"column":85},"action":"remove","lines":["."]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":13,"column":84},"end":{"row":13,"column":84},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1420499313913}